<html>
    <head>
        <style type="text/css">
<!--
.box {
    padding: 0.5em 1em;
    margin: 2em 0;
    font-weight: bold;
    border: solid 3px #000000;
}
.box p {
    margin: 0; 
    padding: 0;
}
                -->
        </style>
    </head>
    <body>
        <div class="box">
            <p>Requests from meta servers to this specialist server</p>
            <ul>
                {% for name,state in requests['in'].items(): %}
                <li>me_host = {{ name }}, is_approved = {{ state }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="box">
            <p>Select connection policy of this specialist search engine</p>
            <p>The current connection policy = "{{ config['connection_policy'] }}" </p>
            <form action="/update_config" method="post">
                <select name="connection_policy">
                    <option value="protected">protected</option>
                    <option value="public">public</option>
                </select>
                <button class="button">set connection policy</button>
            </form>
        </div>

        <div class="box">
            <p>Requests from this specialist server to meta servers</p>
            <ul>
                {% for name,state in requests['out'].items(): %}
                <li>me_host = {{ name }}, is_approved = {{ state }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="box">
            <form action="/send_a_connection_request" method="post">
                <p>Send a requests from this specialist server to meta servers</p>
                <input type="text" id="me_host" name="me_host" cols="50" />
                <button class="button">send a request to meta search engine</button>
            </form>
        </div>

        <div class="box">
            <p>Set your global IP adress or hostname here</p>
            <p>The current IP adress or hostname = {{ config['host_name'] }} </p>
            <form action="/update_config" method="post">
                <input type="text" id="host_name" name="host_name" cols="50" />
                <button class="button">set global IP adress or hostname</button>
            </form>
        </div>

        <div class="box">
            <p>URLs to crawl separated by newlines</p>
            <form action="/init_crawl_urls" method="post">
                URLs↓<br/>
                <textarea name="urls" cols="50" rows="5"></textarea>
                <br/>
                <button class="button">init crawl urls</button>
            </form>
        </div>

        <div class="box">
            <p>Send DB summary</p>
            <script>
<!--
function send_db_summary() {
    button_status = document.getElementById("submit_button");
    button_status.disabled = "disabled";

    var formData = "sp_host="+document.getElementById('sp_host').value+"&me_host="+document.getElementById('me_host').value;

    var xhr = new XMLHttpRequest();

    xhr.addEventListener('load', function(event) {
        button_status.disabled = "";
        return false;
    });

    xhr.addEventListener('error', function(event) {
        alert('failed');
        return false;
    });
    xhr.open('POST', '/send_db_summary', true);

    xhr.setRequestHeader( 'Content-Type', 'application/x-www-form-urlencoded' );
    xhr.send(formData);
    return false;
}
// -->
            </script>
            <form id=send_db_summary_form onsubmit="send_db_summary();return false;">
                <div>
                    <label for="me_host">me_host</label>
                    <input type="text" id="me_host" name="me_host" cols="50" />
                </div>
                <div>
                    <label for="sp_host">sp_host</label>
                    <input type="text" id="sp_host" name="sp_host" cols="50" />
                </div>
                <button id="submit_button" type="submit">send db summary</button>
            </form>
        </div>

        <div class="box">
            <p>Learn Parameter for the classifier in the crawler</p>
            <form name=learn_params_form action="/learn_params" method="post">
                language<br/>
                <input type="text" id="language" name="language" cols="10" />
                <br/>
                URLs in your crawling topic↓<br/>
                <textarea name="topic_urls" cols="50" rows="5"></textarea>
                <br/>
                URLs in random topic↓<br/>
                <textarea name="random_urls" cols="50" rows="5"></textarea>
                <br/>
                <button type="submit">learn crawler parameters</button>
            </form>
        </div>
    </body>
</html>
